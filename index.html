<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="theme-color" content="#ff6fa8" />
    <title>Hello Kitty 惊喜盲盒</title>
    <meta name="description" content="为女朋友制作的可爱Hello Kitty惊喜盲盒，含能量系统与摇一摇开启。" />
    <link rel="preload" as="image" href="Hv1p6wAtu6hIOGXBjtzbo.png" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="confetti-layer" aria-hidden="true"></div>

    <header class="site-header">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true">🎀</div>
        <h1>Hello Kitty 惊喜盲盒 ✨</h1>
      </div>
      <div class="energy">
        <span class="energy-label">能量</span>
        <span id="energy-value">0</span>
        <div class="energy-bar" role="progressbar" aria-label="能量进度" aria-valuemin="0" aria-valuemax="999" aria-valuenow="0">
          <div class="energy-fill"></div>
        </div>
        <span class="muted energy-cap">999</span>
        <button id="btn-help" class="btn ghost" title="玩法说明">？</button>
        <button id="btn-settings" class="btn ghost" title="自定义奖池">⚙️</button>
        <a href="history.html" class="btn" title="查看与你的记忆">与你的记忆</a>
        <button id="btn-logout" class="btn ghost" title="退出登录" style="color:#ff3d8f;">退出</button>
      </div>
    </header>

    <main class="content">
      <section class="hero">
        <img class="hero-kitty" src="Hv1p6wAtu6hIOGXBjtzbo.png" alt="Hello Kitty" />
        <div class="hero-text">
          <h2>给最爱的你，专属的浪漫能量 💖</h2>
          <p>集能量，开盲盒，让每一天都有小惊喜 🎁</p>
          <div class="love-days">
            <span class="love-icon">💕</span>
            <span class="love-text">和乐为在一起已经 <strong id="days-count">0</strong> 天啦</span>
          </div>
        </div>
      </section>

      <section class="boxes">
        <h3>浪漫盲盒</h3>
        <div class="box-grid">
          <!-- 甜心小确幸 -->
          <article class="box-card" data-box="sweet" data-cost="10">
            <div class="box-3d" tabindex="0" role="button" aria-label="连点开启 甜心小确幸">
              <div class="box-body"></div>
              <div class="box-lid"></div>
              <div class="box-bow">🎀</div>
              <div class="shake-hint">点击开启</div>
              <img class="box-cover" src="描绘画面 (1).png" alt="甜心小确幸封面" />
            </div>
            <div class="box-info">
              <h4>甜心小确幸</h4>
              <p class="muted">消耗 10 能量</p>
              
              <div class="tap-progress" data-box="sweet" aria-label="点击进度"></div>
            </div>
          </article>

          <!-- 心动宝贝 -->
          <article class="box-card" data-box="heart" data-cost="25">
            <div class="box-3d" tabindex="0" role="button" aria-label="连点开启 心动宝贝">
              <div class="box-body"></div>
              <div class="box-lid"></div>
              <div class="box-bow">🎀</div>
              <div class="shake-hint">点击开启</div>
              <img class="box-cover" src="描绘画面 (2).png" alt="心动宝贝封面" />
            </div>
            <div class="box-info">
              <h4>心动宝贝</h4>
              <p class="muted">消耗 25 能量</p>
              
              <div class="tap-progress" data-box="heart" aria-label="点击进度"></div>
            </div>
          </article>

          <!-- 浪漫时光盒子 -->
          <article class="box-card" data-box="romance" data-cost="50">
            <div class="box-3d" tabindex="0" role="button" aria-label="连点开启 浪漫时光盒子">
              <div class="box-body"></div>
              <div class="box-lid"></div>
              <div class="box-bow">🎀</div>
              <div class="shake-hint">点击开启</div>
              <img class="box-cover" src="描绘画面 (3).png" alt="浪漫时光盒子封面" />
            </div>
            <div class="box-info">
              <h4>浪漫时光盒子</h4>
              <p class="muted">消耗 50 能量</p>
              
              <div class="tap-progress" data-box="romance" aria-label="点击进度"></div>
            </div>
          </article>
        </div>
      </section>

      <!-- 历史已移至独立页面 history.html -->

      <section class="supply-station" id="energy">
        <div class="supply-card">
          <img class="supply-image" src="补给站.jpg" alt="能量补给站" />
          <div class="supply-content">
            <h3 class="supply-title">恋爱能量补给站 💞</h3>
            <div class="supply-inputs">
              <input id="custom-note" type="text" maxlength="40" placeholder="记录点滴" />
              <input id="custom-energy" type="number" min="1" max="999" placeholder="能量值" />
              <button id="btn-add-custom" class="btn primary">添加能量</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <dialog id="reveal-dialog" class="reveal">
      <form method="dialog">
        <div class="reveal-card">
          <div class="reveal-header">
            <span class="spark">✨</span>
            <h3 id="reveal-title">惊喜到啦</h3>
            <span class="spark">✨</span>
          </div>
          <div id="reveal-content" class="reveal-content"></div>
          <div class="reveal-actions">
            <button id="btn-draw-again" class="btn primary">再来一次</button>
            <button id="btn-close-reveal" class="btn">收下</button>
          </div>
        </div>
      </form>
    </dialog>

    <dialog id="help-dialog" class="help">
      <form method="dialog">
        <h3>💖 抽奖系统说明</h3>
        <div class="help-intro">
          <p class="help-highlight">🎉 恭喜！你已经和乐为在一起满 <strong>1000天</strong> 啦！</p>
          <p class="help-subtitle">为了纪念这个特殊的日子，专属抽奖系统已为你解锁～</p>
        </div>
        <h4>✨ 使用方法</h4>
        <ol>
          <li><strong>获取能量</strong>：在"恋爱能量补给站"输入点滴和能量值。</li>
          <li><strong>选择盲盒</strong>：点击任意盲盒，消耗对应能量即可抽取惊喜。</li>
          <li><strong>查看记录</strong>：所有抽取会记录在"与你的记忆"中，可随时回顾。</li>
          <li><strong>自定义奖池</strong>：点击右上角设置按钮，可以自定义每个盲盒的奖励内容。</li>
        </ol>
        <div class="dialog-actions">
          <button class="btn primary">开始探索</button>
        </div>
      </form>
    </dialog>

    <dialog id="settings-dialog" class="settings">
      <form method="dialog" id="settings-form">
        <h3>自定义奖池</h3>
        <p class="muted">说明：每行一个奖励；保存后立即生效（本地存储）。</p>
        <div class="settings-grid">
          <div class="settings-col">
            <label for="pool-sweet">甜心小确幸</label>
            <textarea id="pool-sweet" rows="6" placeholder="每行一个奖励"></textarea>
          </div>
          <div class="settings-col">
            <label for="pool-heart">心动宝贝</label>
            <textarea id="pool-heart" rows="6" placeholder="每行一个奖励"></textarea>
          </div>
          <div class="settings-col">
            <label for="pool-romance">浪漫时光盒子</label>
            <textarea id="pool-romance" rows="6" placeholder="每行一个奖励"></textarea>
          </div>
        </div>
        <div class="dialog-actions" style="justify-content: space-between;">
          <div style="display:flex;gap:8px;">
            <button id="btn-preview-pools" class="btn ghost">预览抽样×5</button>
            <button id="btn-reset-pools" class="btn ghost">恢复默认</button>
          </div>
          <div style="display:flex;gap:8px;">
            <button class="btn" value="cancel">取消</button>
            <button id="btn-save-pools" class="btn primary" value="default">保存</button>
          </div>
        </div>
      </form>
    </dialog>

    <script src="script.js" defer></script>
  </body>
  </html>


